---
title: Maps, charts and other possibilities
---


Socrata is more than a place to dump raw tables, or at least
it tries to be; you can make various charts and maps, and you
can serve non-tabular information to some degree. I'm wondering,
first, what all of these visualizations are and, second, which
ones people use where.

## Concepts

### Display types
There are many ways that a particular dataset could be visualized.
Socrata has `length(unique(socrata$displayType))` ways.
Here they are.

```{r display_types}
ggplot(sqldf('select displayType from socrata group by id')) + aes(x = displayType) + geom_bar() + coord_flip()
```

### View Types
Socrata is primarily used for storing tabular data,
but it can do a lot of other things too. It has four
view types, one for each of four different internal
representations of the data.

* **tabular** is for tabular data, like a spreadsheet.
* **geo** is for map data. It's pretty similar to **tabular**,
    except that it has a special geospatial column type.
* **blobby** is for arbitrary files. You could put PDF files
    up if you want.
* **href** is for links to external files.

The most common view type is tabular.

```{r view_types}
ggplot(sqldf('select viewType from socrata group by id')) + aes(x = viewType) + geom_bar() + coord_flip()
```

### Those views with no view type
Above, you may have notice that lots of views have no view type.
At first, I thought they might just all be hrefs (external datasets).

```{r display_and_view_types}
ggplot(sqldf('select displayType, viewType from socrata group by id')) + aes(x = displayType, group = viewType, fill = viewType) + geom_bar() + coord_flip()                                                                                
```

Apparently not. Even though there's an href display type and a tabular
display type, we still find data with href and tabular view types and
empty display types. I looked at a few of these datasets to see what
was going on. It turned out that a bunch of them had no records.

```{r empty_display_type}
subset(socrata, displayType == '')[1:10,c('portal', 'id', 'viewType', 'nrow')]
```

```{r 
empty.views <- sqldf('select displayType = "" as emptyDisplayType, viewType, nrow from socrata group by id')
empty.views$emptyDisplayType <- as.logical(empty.views$emptyDisplayType)
ggplot(empty.views) + aes(x = nrow, color = emptyDisplayType, y = viewType) +
  geom_jitter() + scale_x_log10('Number of records', labels = comma)
```

[view](/!/socrata-genealogies#term-view)
