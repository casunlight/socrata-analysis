---
title: Maps, charts and other possibilities
---


Socrata is more than a place to dump raw tables, or at least
it tries to be; you can make various charts and maps, and you
can serve non-tabular information to some degree. I'm wondering,
first, what all of these visualizations are and, second, which
ones people use where.

## Concepts

### Display types
There are many ways that a particular dataset could be visualized.
Socrata has `length(unique(socrata$displayType))` ways.
Here they are.

```{r display_types}
ggplot(sqldf('select displayType from socrata group by id')) + aes(x = displayType) + geom_bar() + coord_flip()
```

### View Types
Socrata is primarily used for storing tabular data,
but it can do a lot of other things too. It has four
[view](/!/socrata-genealogies#term-view)
types, one for each of four different internal
representations of the data.

* **tabular** is for tabular data, like a spreadsheet.
* **geo** is for map data. It's pretty similar to **tabular**,
    except that it has a special geospatial column type.
* **blobby** is for arbitrary files. You could put PDF files
    up if you want.
* **href** is for links to external files.

The most common view type is tabular.

```{r view_types}
ggplot(sqldf('select viewType from socrata group by id')) + aes(x = viewType) + geom_bar() + coord_flip()
```

### Those views with no view type
Above, you may have notice that lots of views have no view type.
At first, I thought they might just all be hrefs (external datasets).

```{r display_and_view_types}
ggplot(sqldf('select displayType, viewType from socrata group by id')) + aes(x = displayType, group = viewType, fill = viewType) + geom_bar() + coord_flip()                                                                                
```

Apparently not. Even though there's an href display type and a tabular
display type, we still find data with href and tabular view types and
empty display types. I looked at a few of these datasets to see what
was going on but didn't come up with any satisfactory answer.

So I don't really know why some views don't have view types.

## Hip view types
Let's focus on the things that are neither tables nor external links.

```{r not_boring}
not.boring <- subset(socrata.distinct, displayType != '' & displayType != 'table' & displayType != 'href' & displayType != 'blob')
not.boring$displayType <- factor(not.boring$displayType, levels = names(sort(table(not.boring$displayType), decreasing = T)))
ggplot(not.boring) + aes(x = displayType) + geom_bar() + coord_flip()
```

What are all of these types? Here are some examples.

With so many types, I'm surprised that map and chart are pretty much the only ones that get used.
I can see why few people would make APIs, but you'd think people would want to try making pie charts
instead of the normal "chart".

In hipster fashion, I think that maps and charts are overused, so
I'm going to look at the cool ones that nobody has heard about.

### Intensity map
There is only one [intensitymap](https://opendata.socrata.com/dataset/Statewise-Prison-Population/dud8-q2qd?)
among all of the views on all of the Socrata portals. I have no idea what it is, nor how to create one.
I tried making a [heat map](https://opendata.socrata.com/Government/Tom-made-a-heat-map/h4cx-3gq9), but that
gets the type "map" rather than "intensitymap". I guess they don't make these anymore.

### Various charts
The "*chart" types all seem to be real things.
Here's a [piechart](https://opendata.socrata.com/dataset/By-County-Chart/66gq-2hse?).
Look at my [area chart](https://opendata.socrata.com/dataset/Tom-makes-an-area-chart-/45sn-pggi)!
I'm sure you can guess what the rest look like.

One funny thing: I can't tell the difference between an
[imagesparkline](https://opendata.socrata.com/Business/growth-chart-2/kefb-jf8u?)
and a [linechart](https://opendata.socrata.com/dataset/Num-employees-by-sector-trend-chart/zwsx-hn97?).

### Page
A [page](https://explore.data.gov/dataset/OlaSW_WH/4yyz-msx7?)
lets you look at one record at a time. People actually use this!
Especially in Oregon.

```{r page_portal}
ggplot(subset(socrata, displayType == 'page')) + aes(x = portal) + geom_bar() + coord_flip()
```

Who's dwiese?

```{r page_owner}
ggplot(subset(socrata.distinct, displayType == 'page')) + aes(x = owner_displayName) + geom_bar() + coord_flip()
```

It seems that he made a few pages on explore.data.gov that were federated.

    subset(socrata, displayType == 'page' & owner.displayName == 'dwiese')[c('portal', 'id')]

Like [this one](https://explore.data.gov/dataset/OlaSW_WH/4yyz-msx7?)

I'm still totally confused; I don't see why you would ever want one of these.
Maybe it would be useful if you could get a URL for a particular page, but you
can't even do that. Do people really use these?

```{r page_use}
ggplot(subset(socrata.distinct, displayType == 'page')) + aes(x = viewCount) + geom_histogram() +
  scale_x_continuous('Hits per "page" (paginated dataset view type)') +
  scale_y_continuous('Frequency', breaks = seq(0, 12, 4)) +
  ggtitle("People don't really look at data in the \"page\" view.")
```

No, not really. Though that was more than I'd expected.

### Calendar
The [calendar](https://data.oregon.gov/dataset/Public-Meetings-3-Month-View-/4775-yg3b?)
is what it sounds like. People do use these.

```{r calendar_use}
ggplot(subset(socrata.distinct, displayType == 'calendar')) + aes(x = viewCount) + geom_histogram() +
  scale_x_continuous('Hits per calendar', labels = comma) +
  scale_y_continuous('Frequency', labels = comma) +
  ggtitle("Someone likes her calendar.")
```

```{r calendar_use_2}
calendar.use <- subset(socrata, displayType == 'calendar')[c('portal', 'id', 'viewCount')]
calendar.use[order(calendar.use$viewCount, decreasing = T),][1:5,c('portal', 'id', 'viewCount')]
```

Check out Missouri's [open meetings calendar](https://data.mo.gov/Government-Administration/Open-Meetings-Calendar/mahp-izvx?).
They also have a different view of the calendar [outside the portal](http://www.mo.gov/meetings/),
with an RSS feed from the Socrata portal. But I don't know how the calendar on Socrata got so many views.

It looks like some other portals are using calendars a lot too,
but usually with several separate calendars instead of one huge one.

```{r calendar_use_3}
ggplot(sqldf('select portal, sum(viewCount) AS "total.view.count", count(*) AS "number.of.calendars" FROM "calendar.use" GROUP BY portal;')) +
  aes(x = number.of.calendars, y = total.view.count, label = portal) + geom_text() +
  scale_x_log10('Number of calendars in the portal', breaks = c(1,5,25)) +
  scale_y_log10('Total hits across all calendars', labels = comma, breaks = 10^(2:6))

### Form
It seems that a [form](https://data.wa.gov/Economics/Broadband-Project-Data-Entry/38rz-krmg?)
lets you enter data.

### Fat row
A [fatrow](https://electionsdata.kingcounty.gov/dataset/Attorney-General-table-General-Election-2012/2y5z-ffa8?)
is something between a table and a page.

### API
Here's an [api](https://data.energystar.gov/Government/ENERGY-STAR-Certified-Geothermal-Heatpumps/2f83-p388?).
I think it's an API built with the [API foundry](http://www.socrata.com/api-foundry/).
It comes with automatic [documentation](https://data.energystar.gov/developers/docs/energy-star-certified-geothermal-heatpumps).

